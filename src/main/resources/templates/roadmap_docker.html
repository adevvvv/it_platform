<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Docker</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Lingua project">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/styles/bootstrap4/bootstrap.min.css">
    <link href="/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/animate.css">
    <link rel="stylesheet" type="text/css" href="/styles/course.css">
    <link rel="stylesheet" type="text/css" href="/styles/course_responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- and it's easy to individually load additional languages -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>
<body>

<div class="super_container">

    <!-- Header -->
    <header th:insert="blocks/header::header"></header>

    <!-- Home -->
    <div class="home">
        <div class="home_background"></div>
        <div class="home_content">
            <div class="container">
                <div class="row">
                    <div class="col text-center">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Course -->

    <div class="course">
        <div class="course_top"></div>
        <div class="container">
            <div class="row row-lg-eq-height">

                <!-- Panels -->
                <div class="col-lg-11">
                    <div class="panel_title"><img class="img_commands" src="/images/docker.svg" alt=""> Docker</div>
                    <div class="tab_panels">

                        <!-- Tabs -->
                        <div class="course_tabs_container">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-9">
                                        <div class="tabs d-flex flex-row align-items-center justify-content-start">
                                            <div class="tab active">roadmap</div>
                                            <div class="tab">commands</div>
                                            <!--											<div class="tab">вопросы</div>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="tab_panel description active">
                            <div class="panel_text">
                                <a href="https://ru.wikipedia.org/wiki/Docker">Docker </a> <a>— программное обеспечение для автоматизации развёртывания и управления приложениями в средах с поддержкой контейнеризации.</a>
                            </div>

                            <!-- FAQs -->
                            <div class="faqs">
                                <div class="panel_title">Roadmap</div>
                                <div class="accordions">

                                    <div class="elements_accordions">


                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №1</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                            </div>
                                        </div>

                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №2</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                            </div>
                                        </div>

                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №3</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab_panel curriculum">

                            <!-- FAQs -->
                            <div class="faqs">
                                <div class="panel_title">Commands</div>
                                <div class="accordions">

                                    <div class="elements_accordions">Установка (Linux)
                                        <pre><code class="language-java">curl -sSL https://get.docker.com/ | sh</code></pre>
                                        Вход в реестр
                                        <pre><code class="language-java">docker login
docker login localhost:8080</code></pre>Выход из реестра
                                        <pre><code class="language-java">docker logout
docker logout localhost:8080</code></pre>Поиск образа
                                        <pre><code class="language-java">docker search nginx
docker search nginx -- filter stars=3 --no-trunc busybox</code></pre>Pull (выгрузка из реестра) образа
                                        <pre><code class="language-java">docker pull nginx
docker pull eon01/nginx localhost:5000/myadmin/nginx</code></pre>Push (загрузка в реестр) образа
                                        <pre><code class="language-java">docker push eon01/nginx
docker push eon01/nginx localhost:5000/myadmin/nginx</code></pre>Создание контейнера
                                        <pre><code class="language-java">docker create -t -i eon01/infinite --name infinite</code></pre>
                                                <pre><code class="language-java">


Первые действия с контейнерами

Создание контейнера

docker create -t -i eon01/infinite --name infinite

Первый запуск контейнера

docker run -it --name infinite -d eon01/infinite

Переименование контейнера

docker rename infinite infinity

Удаление контейнера

docker rm infinite

Обновление контейнера

docker update --cpu-shares 512 -m 300M infinite

Запуск и остановка контейнеров

Запуск остановленного контейнера

docker start nginx

Остановка

docker stop nginx

Перезагрузка

docker restart nginx

Пауза (приостановка всех процессов контейнера)

docker pause nginx

Снятие паузы

docker unpause nginx

Блокировка (до остановки контейнера)

docker wait nginx

Отправка SIGKILL (завершающего сигнала)

docker kill nginx

Отправка другого сигнала

docker kill -s HUP nginx

Подключение к существующему контейнеру

docker attach nginx

Получение информации о контейнерах

Работающие контейнеры

docker ps

docker ps -a

Логи контейнера

docker logs infinite

Информация о контейнере

docker inspect infinite

docker inspect --format '{{ .NetworkSettings.IPAddress }}' $(docker ps -q)

События контейнера

docker events infinite

Публичные порты

docker port infinite

Выполняющиеся процессы

docker top infinite

Использование ресурсов

docker stats infinite

Изменения в файлах или директориях файловой системы контейнера

docker diff infinite

Управление образами

Список образов

docker images

Создание образов

docker build .

docker build github.com/creack/docker-firefox

docker build - < Dockerfile

docker build - < context.tar.gz

docker build -t eon/infinite .

docker build -f myOtherDockerfile .

curl example.com/remote/Dockerfile | docker build -f - .

Удаление образа

docker rmi nginx

Загрузка репозитория в tar (из файла или стандартного ввода)

docker load < ubuntu.tar.gz

docker load --input ubuntu.tar

Сохранение образа в tar-архив

docker save busybox > ubuntu.tar

Просмотр истории образа

docker history

Создание образа из контейнера

docker commit nginx

Тегирование образа

docker tag nginx eon01/nginx

Push (загрузка в реестр) образа

docker push eon01/nginx

Сеть

Создание сети

docker network create -d overlay MyOverlayNetwork

docker network create -d bridge MyBridgeNetwork

docker network create -d overlay \
  --subnet=192.168.0.0/16 \
  --subnet=192.170.0.0/16 \
  --gateway=192.168.0.100 \
  --gateway=192.170.0.100 \
  --ip-range=192.168.1.0/24 \
  --aux-address="my-router=192.168.1.5" --aux-address="my-switch=192.168.1.6" \
  --aux-address="my-printer=192.170.1.5" --aux-address="my-nas=192.170.1.6" \
  MyOverlayNetwork

Удаление сети

docker network rm MyOverlayNetwork

Список сетей

docker network ls

Получение информации о сети

docker network inspect MyOverlayNetwork

Подключение работающего контейнера к сети

docker network connect MyOverlayNetwork nginx

Подключение контейнера к сети при его запуске

docker run -it -d --network=MyOverlayNetwork nginx

Отключение контейнера от сети

docker network disconnect MyOverlayNetwork nginx

Очистка Docker

Удаление работающего контейнера

docker rm nginx

Удаление контейнера и его тома (volume)

docker rm -v nginx

Удаление всех контейнеров со статусом exited

docker rm $(docker ps -a -f status=exited -q)

Удаление всех остановленных контейнеров

docker container prune

docker rm `docker ps -a -q`

Удаление контейнеров, остановленных более суток назад

docker container prune --filter "until=24h"

Удаление образа

docker rmi nginx

Удаление неиспользуемых (dangling) образов

docker image prune

docker rmi $(docker images -f dangling=true -q)

Удаление неиспользуемых (dangling) образов даже с тегами

docker image prune -a

Удаление всех образов

docker rmi $(docker images -a -q)

Удаление всех образов без тегов

docker rmi -f $(docker images | grep "^<none>" | awk "{print $3}")

Остановка и удаление всех контейнеров

docker stop $(docker ps -a -q) && docker rm $(docker ps -a -q)

Удаление неиспользуемых (dangling) томов

docker volume prune

docker volume rm $(docker volume ls -f dangling=true -q)

Удаление неиспользуемых (dangling) томов по фильтру

docker volume prune --filter "label!=keep"

Удаление неиспользуемых сетей

docker network prune

Удаление всех неиспользуемых объектов

docker system prune

По умолчанию для Docker 17.06.1+ тома не удаляются. Чтобы удалились и они тоже:
docker system prune --volumes

Docker Swarm

Установка Docker Swarm

curl -ssl https://get.docker.com | bash

Прим. перев.: в Docker версий 1.12.0+ ничего дополнительно устанавливать не требуется, т.к. Docker Swarm встроен в Docker Engine в виде специального режима (Swarm mode).

Инициализация Swarm

docker swarm init --advertise-addr 192.168.10.1

Подключение рабочего узла (worker) к Swarm

docker swarm join-token worker

Подключение управляющего узла (manager) к Swarm

docker swarm join-token manager

Список сервисов

docker service ls

Список узлов

docker node ls

Создание сервиса

docker service create --name vote -p 8080:80 instavote/vote

Список заданий Swarm

docker service ps

Масштабирование сервиса

docker service scale vote=3

Обновление сервиса

docker service update --image instavote/vote:movies vote

docker service update --force --update-parallelism 1 --update-delay 30s nginx

docker service update --update-parallelism 5--update-delay 2s --image instavote/vote:indent vote

docker service update --limit-cpu 2 nginx

docker service update --replicas=5 nginx</code></pre>
                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №1</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                            </div>
                                        </div>

                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №2</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                                <pre><code class="language-bash">docker-compose </code></pre>
                                            </div>
                                        </div>

                                        <div class="accordion_container">
                                            <div class="accordion d-flex flex-row align-items-center">
                                                <div>Тема №3</div>
                                            </div>
                                            <div class="accordion_panel">
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classes.html">Классы</a>
                                                <br>
                                                <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/objects.html">Объекты</a>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <header th:insert="blocks/footer::footer"></header>
</div>

<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/styles/bootstrap4/popper.js"></script>
<script src="/styles/bootstrap4/bootstrap.min.js"></script>
<script src="/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
<script src="/plugins/easing/easing.js"></script>
<script src="/plugins/parallax-js-master/parallax.min.js"></script>
<script src="/plugins/progressbar/progressbar.min.js"></script>
<script src="/js/course.js"></script>
</body>
</html>